# lesson #1 - Сборка jar файла

JAR (Java Archive): Формат архива для хранения Java классов и мета информации.

## Этап 1: Сборка программы

Выполним сборку программы из корня проекта командой (Если вы находитесь в корне репозитория):

```sh
javac ./lessons/lesson_2/Demo.java
```

В той же директории где находится исходный файл, создастся файл Demo.class

## Этап 2: Создание манифеста

В директории с файлом Demo.class, создайте файл `Manifest.txt`
Скопируйте в него следующее содержимое:

```txt
Main-Class: Demo

```

## Этап 3: Компиляция JAR

Для сборки jar архива используется утилита [jar](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jar.html).

Использование: jar [OPTION...] [ [--release VERSION] [-C dir] files] ...

Запустите команду (Если вы находитесь в корне репозитория):

```sh
jar --create --file ./lessons/lesson_2/Demo.jar --manifest ./lessons/lesson_2/Manifest.txt -C ./lessons/lesson_2 Demo.class
```

Флаг `--create` означает compile и без него jar файл не соберется.
Флаг `--file` означает файл и указывает куда и под каким именем сохранить jar файл.
Флаг `--manifest` означает файл манифеста и с помощью него указывается местоположение файла манифеста.
Флаг `-C` означает каталог и указывает где нужно искать файлы классов которые нужно включить в архив.
В самом конце команды указываются пути со собранных бинарных файлов классов, в нашем случае файл `Demo.class`.

После выполнения вышеописанной команды будет сгенерирован файл `Demo.jar`

## Этап 4: Запуск jar файла

Запуск jar файла осуществляется программой java со специальным флагом.

Запустите команду:

```sh
java -jar ./lessons/lesson_2/Demo.jar
```

## Видео

[How to Create JAR(Java ARchive) File using Command line](https://www.youtube.com/watch?v=RqTd-BtC2sY)

## Файл манифест

При создании JAR-архива в Java обычно требуется добавление файла манифеста. Манифест - это специальный файл, содержащий метаданные о JAR-файле, такие как его версия, основной класс (entry point), зависимости и другие связанные сборочные настройки.

Манифест JAR-файла хранится внутри самого архива и имеет путь META-INF/MANIFEST.MF. Он может быть создан вручную в текстовом редакторе и затем добавлен в JAR-архив, или автоматически сгенерирован с помощью инструментов сборки, таких как Apache Maven или Gradle.

Добавление файла манифеста к JAR-архиву особенно важно, если вы планируете использовать архив в качестве исполняемого JAR-файла, который может быть запущен из командной строки или двойным щелчком мыши. Файл манифеста указывает JVM, какой класс должен быть запущен как точка входа при запуске JAR-файла.

Однако, если ваш JAR-архив не будет использоваться как исполняемый файл, а просто содержать библиотеки или ресурсы, файл манифеста может быть опциональным. В таких случаях можно создать JAR-архив без файла манифеста.

Обратите внимание, что некоторые инструменты сборки могут автоматически создавать файл манифеста по умолчанию, если вы не предоставляете его явно.
